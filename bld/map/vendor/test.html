<!DOCTYPE html>

<html >

	<head>

	    <meta charset="UTF-8" />

		<link href="./winjs/css/ui-dark.css" rel="stylesheet" />


	    <script rel="prefetch" type="application/x-javascript" src="./vendor.js"></script>

	    <script rel="prefetch" type="application/x-javascript" name="main" src="./spice.js" ></script>

		<script>

			window.utils.loadExternalJS([

				'./json-formatter.js' ,

				'./src/html/col_backgrounds.js' ,
				'./src/html/popover.js' ,
				'./src/html/save.js' ,
				'./src/html/style.js' ,
				'./src/html/help.js' ,

				'./src/variables.js' ,
				'./src/thingy.js' ,
				'./src/gridmap.js' ,
				'./src/mapdata.js' ,

				'./src/loading.js',
				'./src/mapper.js',
				'./src/main.js'
			]);

		</script>






		<script src="./winjs/js/base.js"></script>
		<script src="./winjs/js/ui.js"></script>

		<style>
			body{
			    height: 100%;
			}
			.content,
			#app {
			    height: 100%;
			}

			    /* SplitView pane content style*/
			    #app .headerbutton {
			        white-space: nowrap;
			    }

			    #app .title {
			        font-size: 25px;
			        left: 50px;
			        margin-top: 6px;
			        vertical-align: middle;
			        display: inline-block;
			    }

			    #app .nav-commands {
			        margin-top: 20px;
			    }

			.win-splitviewcommand-button {
			    background-color: transparent;
			}

			#app .win-splitview-pane-closed .win-splitviewcommand-label {
			    /*  Make sure pane content doesn't scroll if
			    SplitViewCommand label receives focus while pane is closed.
			    */
			    visibility: hidden;
			}

			/*SplitView content style*/

			.not-small {
			    display: none;
			}

			#app .win-splitview-content {
			    background-color: rgb(112,112,112);
			}

			#app .contenttext {
			    margin-left: 20px;
			    margin-top: 6px;
			    height: 100%;
			}

			    #app .contenttext h1 {
			        font-family: Broadway;
			        font-size: 40px;
			    }

			/*SplitView pane show button style*/
			button.win-splitview-button {
			    float: left;
			    box-sizing: border-box;
			    height: 48px;
			    width: 48px;
			    min-height: 0;
			    min-width: 0;
			    padding: 0;
			    border: 1px dotted transparent;
			    margin: 0;
			    outline: none;
			    background-color: transparent;
			}

			html.win-hoverable button.win-splitview-button:hover {
			    background-color: rgba(255,255,255, 0.1);
			}

			button.win-splitview-button.win-splitview-button:active,
			button.win-splitview-button.win-splitview-button:hover:active {
			    background-color: rgba(255,255,255, 0.2);
			}

			button.win-splitview-button.win-keyboard:focus {
			    border-color: rgb(255, 255, 255);
			}

			button.win-splitview-button:after {
			    font-size: 24px;
			    font-family: 'Segoe MDL2 Assets', 'Symbols';
			    content: "\E700";
			}

			#app .description table tr td {
			    padding-left: 20px;
			}

			/*Flipview*/

			.flipView {
			    width: 100%;
			    padding-top: 20px;
			    max-width: 480px;
			    height: 270px;

			}

			.flipViewContent {
			    width: 100%;
			    max-width: 480px;
			    height: 270px;
			}

			/*Styles used in the Item Template*/
			.avgRating{
			    color: rgba(216, 172, 10, 1.0);
			}
			.overlaidItemTemplate {
			    width: 100%;
			    max-width: 480px;
			    height: 270px;
			}

			    .overlaidItemTemplate img {
			        width: 100%;
			        height: 100%;
			    }

			    .overlaidItemTemplate .overlay {
			        position: absolute;
			        background-color: rgba(0,0,0,0.65);
			        height: 40px;
			        padding: 20px 15px;
			        overflow: hidden;
			        width:100%;
			        bottom:0;
			    }

			        .overlaidItemTemplate .overlay .ItemTitle {
			            color: rgba(255, 255, 255, 0.8);
			        }

			/*Ratings*/


			.description h2 {
			    padding-left: 20px;
			    padding-top: 20px;
			}



			.description p {
			    padding-left: 40px;

			}



			#expandedItem
			{
			    background: #00B6FF;
			}

			/*Home vs trail controls*/

			.show-trail .home-ui {
			    display: none;
			}

			.show-home .trail-ui {
			    display: none;
			}

			.show-save .save-ui {
			    display: none;
			}

			.home-ui {
			    width: 100%;
			    height: 100%;
			    text-align: center;
			    display: block;
			    overflow: auto;

			}

			/*Listview*/
			#hometitle{
			    font-size: 400px;
			    padding: 0px;
			    margin: 0px;
			    padding-top: 10px;
			}
			.myListItem
			{
			    width: auto;
			    height: auto;
			    padding: 5px;
			    overflow: hidden;
			    display: flex;
			}
			.myListImage
			{
			    width: 300px;
			    height: 200px;
			}



			.myListDetail
			{
			    margin: 5px;
			    text-align: left;
			}


			.listLayoutTopHeaderTemplateRoot, .gridLayoutLeftHeaderTemplateRoot {
			    font-size: larger;
			    margin-left: 16px;
			}

			/* CSS applied to the ListViews in this sample */
			#listView
			{
			    height: 100%;
			    /*still may be problem with height...overwrote it here*/
			}

			.mainList{
			    width: 75%;
			    height: calc(100% - 68px);
			    display: inline-block;

			    float: left;
			}

			.recommendedList{
			    width: 24%;
			    height: 100%;
			    overflow: hidden;
			    display: inline-block;
			}

			.myListItem
			{
			    padding: 5px;
			    overflow: hidden;
			    display: flex;
			}

			.myListImage
			{
			    flex: 0 0 auto;
			    width: 300px;
			    height: 200px;
			}

			.win-splitview-pane{



			}
		</style>


	</head>


	<body>



		<div class="customDialog" data-win-control="WinJS.UI.ContentDialog" data-win-options="{
		             title: '',
		             primaryCommandText: 'Ok',
		             primaryCommandDisabled: 'true',
		             secondaryCommandText: 'Cancel'
		        }">

			<div>

				<form action="" class="dialogue-background-upload-form">

				  <li class="win-type-subtitle" onclick="this.querySelector('input').click();">

	  				<input type='text' class='win-textbox' autofocus="autofocus" value="Background" /><span></span>

				  </li>

				  <li class="win-type-subtitle" onclick="this.querySelector('input').click();">

					  <input type="radio" name="TileType" value="Tiled X + Y" class="win-radio"><span>Tiled X + Y</span>

				  </li>

				  <br/>

				  <li class="win-type-subtitle" onclick="this.querySelector('input').click();">

					  <input type="radio" name="TileType" value="Tiled X" class="win-radio"><span>Tiled X</span>

				  </li>

				  <br/>

				  <li class="win-type-subtitle" onclick="this.querySelector('input').click();">

					  <input type="radio" name="TileType" value="Tiled Y" class="win-radio"><span>Tiled Y</span>

				  </li>

				  <br/>

				</form>

			</div>

			<div class="dialogue-background-upload" onclick="this.querySelector('input').click();">

				<input type="file" id="upload_input" name="upload"  />

				<button data-win-control="WinJS.UI.Command" id="cmd_upload" style="width:100%; height:100%;    width: 100%;    position: relative;    top: -67px;    font-size: 3em;    height: 104px;" data-win-options="{
							section:'primary',
							icon: 'upload',
							onclick: Sample.outputCommand}" type="button" class="win-disposable win-command" ></button>

			</div>



		</div>


		<div class="dialogue_editBackground" data-win-control="WinJS.UI.ContentDialog" data-win-options="{
             title: '',
             primaryCommandText: 'Ok',
             secondaryCommandText: 'Cancel'
        }">

			<div>

				<form action="" class="dialogue-background-upload-form">

					<li class="win-type-subtitle" onclick="this.querySelector('input').click();">

  	  				<input type='text' class='win-textbox' autofocus="autofocus" value="Background" /><span></span>

  				  </li>

				  <li class="win-type-subtitle" onclick="this.querySelector('input').click();">

					  <input type="radio" name="TIleType" value="Tiled X + Y" class="win-radio" checked="checked"><span>Tiled X + Y</span>

				  </li>

				  <br/>

				  <li class="win-type-subtitle" onclick="this.querySelector('input').click();">

					  <input type="radio" name="TIleType" value="Tiled X" class="win-radio"><span>Tiled X</span>

				  </li>

				  <br/>

				  <li class="win-type-subtitle" onclick="this.querySelector('input').click();">

					  <input type="radio" name="TIleType" value="Tiled Y" class="win-radio"><span>Tiled Y</span>

				  </li>

				  <br/>

				</form>

			</div>

						<div class="dialogue-background-upload" onclick="this.querySelector('input').click();">

								<img name="" src="">
									
						</div>


		</div>




		<div id="app" class="show-home win-type-body">
		    <!-- SPLIT VIEW -->

		    <div class="splitView" data-win-control="WinJS.UI.SplitView">

		        <!-- Pane area -->
		        <div>

		            <div class="headerbutton">
		                <button
		                    class="win-splitviewpanetoggle"
		                    data-win-control="WinJS.UI.SplitViewPaneToggle"
		                    data-win-options="{ splitView: select('.splitView') }"
		                ></button>
		                <div class="title"><h3 class="win-h3">MAPPER</h2></div>
		            </div>

		            <div class="nav-commands">
		                <div data-win-control="WinJS.UI.SplitViewCommand" data-win-options="{ label: 'Home', icon: 'home', oninvoked: mySplitView.homeClicked}"></div>
		                <div data-trail-id="0" data-win-control="WinJS.UI.SplitViewCommand" data-win-options="{ label: 'Snoqualmie Falls Trail', icon: 'mappin', oninvoked: mySplitView.trailClicked}"></div>
		                <div data-trail-id="1" data-win-control="WinJS.UI.SplitViewCommand" data-win-options="{ label: 'Foster Island Trail', icon: 'mappin', oninvoked: mySplitView.trailClicked}"></div>
		                <div data-trail-id="2" data-win-control="WinJS.UI.SplitViewCommand" data-win-options="{ label: 'Alki Trail', icon: 'mappin', oninvoked: mySplitView.trailClicked}"></div>
		                <div data-trail-id="3" data-win-control="WinJS.UI.SplitViewCommand" data-win-options="{ label: 'Save', icon: 'save', oninvoked: mySplitView.saveClicked}"></div>
		            </div>
		        </div>


				<div class="save-ui" hidden>


							<!-- FLIP VIEW -->
							<div class="simple_ItemTemplate" data-win-control="WinJS.Binding.Template" style="display: none">
								<div class="overlaidItemTemplate">
									<img class="image" data-win-bind="src: picture; alt: title" />
								</div>
							</div>
							<div id="simple_FlipView" class="flipView" data-win-control="WinJS.UI.FlipView"
								data-win-options="{
								itemDataSource: DefaultData.bindingList.dataSource,
								itemTemplate: select('.simple_ItemTemplate')
								}">
							</div>
							<!-- END FLIP VIEW -->

							<!-- DESCRIPTION -->
							<div class="description">
								<!-- this is where the title, location and description are injected for each hiking page -->
								<h2 class="trail-title"></h2>
								<p class="trail-location"></p>
								<p class="trail-description" id="description-content"></p>
								<!--RATING-->
								<table>
									<tr class="detail">
										<td>Rate this trail: </td>
										<td class="control">
											<div class="rating" data-win-control="WinJS.UI.Rating" data-win-options="{averageRating: 3.4}"></div>
										</td>
									</tr>
								</table>
								<!--END RATING-->
							</div>

				</div>


		        <div class="trail-ui">
		                <!-- FLIP VIEW -->
		                <div class="simple_ItemTemplate" data-win-control="WinJS.Binding.Template" style="display: none">
		                    <div class="overlaidItemTemplate">
		                        <img class="image" data-win-bind="src: picture; alt: title" />
		                    </div>
		                </div>
		                <div id="simple_FlipView" class="flipView" data-win-control="WinJS.UI.FlipView"
		                    data-win-options="{
		                    itemDataSource: DefaultData.bindingList.dataSource,
		                    itemTemplate: select('.simple_ItemTemplate')
		                    }">
		                </div>
		                <!-- END FLIP VIEW -->

		                <!-- DESCRIPTION -->
		                <div class="description">
		                    <!-- this is where the title, location and description are injected for each hiking page -->
		                    <h2 class="trail-title"></h2>
		                    <p class="trail-location"></p>
		                    <p class="trail-description" id="description-content"></p>
		                    <!--RATING-->
		                    <table>
		                        <tr class="detail">
		                            <td>Rate this trail: </td>
		                            <td class="control">
		                                <div class="rating" data-win-control="WinJS.UI.Rating" data-win-options="{averageRating: 3.4}"></div>
		                            </td>
		                        </tr>
		                    </table>
		                    <!--END RATING-->
		                </div>














		            </div>  <!-- closes trail-ui-->

										<canvas id="canvas_0" width="1920" height="674" style="position: absolute;left:-48px; z-index: 1;"></canvas><br/>
		        <div class="home-ui" hidden>



		                <!--ListView and Repeater-->
		                    <!-- Simple template for the ListView instantiation  -->
		                    <div hidden class="mainList">

		                        <h2 class="win-h2"> Trails</h2>
		                        <div class="myListTemplate" data-win-control="WinJS.Binding.Template"  >
		                            <div class ="myListItem">
		                                <img src="#" class="myListImage" data-win-bind="src: preview" />
		                                <div class="myListDetail">
		                                    <h4 data-win-bind="textContent: title"></h4>
		                                    <h6 data-win-bind="textContent: description"></h6>
		                                    <div class="avgRating" data-win-control="WinJS.UI.Rating"  data-win-bind="winControl.userRating: averageRating" ></div>
		                                </div>
		                            </div>
		                        </div>


		                    <!-- The declarative markup necesary for ListView instantiation -->
		                    <!-- Call WinJS.UI.processAll() in your initialization code -->
		                        <div id="listView"
		                            class="win-selectionstylefilled"
		                            data-win-control="WinJS.UI.ListView"
		                            data-win-options="{
		                            itemDataSource: myList.data.dataSource,
		                            itemTemplate: select('.myListTemplate'),
		                            selectionMode: 'none',
		                            tapBehavior: 'none',
		                            layout: { type: WinJS.UI.ListLayout }
		                            }">
		                        </div>
		                    </div>
		                    <!-- Repeater -->
		                     <div hidden class="recommendedList">
		                        <h3 class="win-h3"> Top Hikes by Users</h3>
		                        <div data-win-control="WinJS.UI.Repeater" data-win-options="{data: myList.data}">
		                            <div>
		                                <h2 style="display: inline-block" data-win-bind="textContent: title"></h2> <br>
		                                <div class="win-small" data-win-control="WinJS.UI.Rating" data-win-bind="winControl.userRating: averageRating"></div>
		                                <br>
		                            </div>
		                        </div>
		                    </div>
		                <!--End ListView and Repeater-->
		            </div>  <!-- closes home-ui-->

		    </div>
		</div>



				<script>
				(function () {
				    "use strict";

				    var app = WinJS.Application;
				    //SPLIT VIEW
				    var mySplitView = window.mySplitView = {
				        splitView: null,
				        trailClicked: WinJS.UI.eventHandler(function (ev) {
				            var trailId = ev.currentTarget.dataset.trailId;
				            updateUI(allTrails[trailId]);
				            document.getElementById("app").classList.remove("show-save");
								var main;
								main = document.getElementById('main');
											main.className = "ColumnHide";
				        }),
				        homeClicked: WinJS.UI.eventHandler(function (ev) {
				            //add remove tags
				            document.getElementById("app").classList.add("show-home");
				            document.getElementById("app").classList.remove("show-trail");
				            document.getElementById("app").classList.remove("show-save");
								var main;
								main = document.getElementById('main');
											main.className = "ColumnHide";
				        }),
				        saveClicked: WinJS.UI.eventHandler(function (ev) {
				            //add remove tags
				            document.getElementById("app").classList.add("show-save");
				            document.getElementById("app").classList.remove("show-trail");


							SidebarColumnSave();
							SidebarColumnToggleVisibiiity();
				        }),
				    };
				    //END SPLIT VIEW

				function updateUI(trail) {

				        //add remove tags
				        document.getElementById("app").classList.add("show-trail");
				        document.getElementById("app").classList.remove("show-home");


				        //update title
				        var titleElt = document.body.querySelector(".trail-title");
				        titleElt.textContent = trail.title;

				        //update location
				        var locationElt = document.body.querySelector(".trail-location");
				        locationElt.textContent = trail.location;

				        //update description
				        var descriptionElt = document.body.querySelector(".trail-description");
				        descriptionElt.textContent = trail.description;

				        //update Flipview
				        var flipViewElt = document.body.querySelector(".flipView");
				        //---------------------------------------JS #1-2: Work Here--------------------------------------------

				        //---------------------------------------End JS #1-2----------------------------------------------------

				        //update Rating
				        var ratingElt = document.body.querySelector(".rating");
				        ratingElt.winControl.averageRating = trail.averageRating;
				        ratingElt.winControl.userRating = 0;
				    }

				    var trailNameToID = {
				        "Snoqualmie Falls Trail": 0,
				        "Foster Island Trail": 1,
				        "Alki Trail": 2
				    }

				     var allTrails = [
				        {
				            title: "Snoqualmie Falls Trail", averageRating: 2, location: "Kirkland, WA", preview: "../library/Snoqualmie.jpg", pictureArray: [
				                { type: "item", picture: "../library/Snoqualmie.jpg" },
				                { type: "item", picture: "../library/Snoqualmie.jpg" }

				            ], description: "Snoqualmie Falls is one of Washington state's most popular scenic attractions. More than 1.5 million visitors come to the Falls every year. At the falls, you will find a two-acre park, gift shop, observation deck, the Salish Lodge and the famous 270 foot waterfall."
				        },
				        {
				            title: "Foster Island Trail", averageRating: 4.5, location: "Bellevue, WA", preview: "../library/Foster.jpg", pictureArray: [
				                 { type: "item", picture: "../library/Foster.jpg" },
				                 { type: "item", picture: "../library/Foster.jpg" }

				            ], description: "Foster Island Trail is a 2 mile loop trail located near Seattle, Washington that features a lake and is good for all skill levels. The trail offers a number of activity options and is accessible year-round."
				        },
				        {
				            title: "Alki Trail", averageRating: 1.5, location: "Seattle, WA", preview: "../library/Alki.jpg", pictureArray: [
				                 { type: "item", picture: "../library/Alki.jpg" },
				                 { type: "item", picture: "../library/Alki.jpg" }
				            ], description: "The Alki Trail rides along the northern and eastern shore of West Seattle along Alki Avenue. Largely riding on a widened sidewalk, separated from traffic by a parking lane and curb, traffic on the trail is separated for bikes and walkers, providing a less stressful experience for walkers and bikers alike. "
				        }
				    ]

				    //FLIP VIEW
				    var placeholderArray = [
				            { type: "item", picture: "../library/Alki.jpg" }
				    ];

				    var DefaultData = window.DefaultData = {
				        bindingList: new WinJS.Binding.List(placeholderArray)
				    }

				    // FLIP VIEW

				    //REPEATER AND LISTVIEW
				        //create an array of trails to turn the allTrails object into an array
				        var trailArray = [];

				        //We've added each trail in the allTrails object into the trailArray
				        for (var i = 0; i < allTrails.length ; ++i) {
				            trailArray.push(allTrails[i]);
				        }

				        //create a binding list out of the trailArray we just created
				        var myList = window.myList = {
				            data: new WinJS.Binding.List(trailArray)
				        };

				    //END REPEATER AND LISTVIEW
					function showDialog() {
					    document.querySelector(".win-contentdialog").winControl.show();
					}

				    //processAll
				    WinJS.UI.processAll().then(function () {
				        mySplitView.splitView = document.querySelector(".splitView").winControl;


					    var showButton = document.querySelector(".showButton");
					    showButton.addEventListener("click", showDialog, false);


				        new WinJS.UI._WinKeyboard(mySplitView.splitView.paneElement);
				    });






































				    app.start();
				})();

				</script>

		<script>



		</script>



	</body>

</html>
